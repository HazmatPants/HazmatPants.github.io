<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft Server Status</title>
    <link href="style.css" rel="stylesheet" type="text/css" media="all">
    <script>
        async function checkServerStatus() {
            const serverIP = 'friend-considering.gl.joinmc.link';
            const response = await fetch(`https://api.mcsrvstat.us/2/${serverIP}`);
            const data = await response.json();

            const statusElement = document.getElementById('status');
            const playersElement = document.getElementById('players');
            const modsElement = document.getElementById('mods');
            const motdElement = document.getElementById('motd');

            if (data.online) {
                statusElement.textContent = 'Server is online!';
                statusElement.style.color = 'limegreen';

                motdElement.textContent = `"${data.motd.clean}"`;
                
                // Show players online
                const playerCount = data.players.online;
                const playerList = data.players.list || []; // Some servers may not return a list

                if (playerCount > 0) {
                  playersElement.innerHTML = `Players online: ${playerCount}<br>`;
                } else {
                  playersElement.innerHTML += 'No players online.';
                }
                if (playerCount > 0) {
                    playersElement.innerHTML += `Players: ${playerList.join(', ')}`;
                } 

                // Show mods
                const modList = data.mods || []; // Check if mod list exists
                if (modList.length > 0) {
                    modsElement.innerHTML = '<strong>Installed Mods:</strong><ul>';
                    modList.forEach(mod => {
                        modsElement.innerHTML += `<li>${mod.name} (Version: ${mod.version})</li>`;
                    });
                    modsElement.innerHTML += '</ul>';
                } else {
                    modsElement.innerHTML = 'No mods installed.';
                }

            } else {
                statusElement.textContent = 'Server is offline!';
                statusElement.style.color = 'red';
                playersElement.textContent = '';
                modsElement.textContent = '';
            }
        }

        window.onload = checkServerStatus;
    </script>
</head>
<body>
    <h1>Minecraft Server Status</h1>
    <strong>IP: friend-considering.gl.joinmc.link</strong>
    <p id="status">Checking server status...</p>
    <p id="motd"></p>
    <p id="players"></p>
    <div id="mods"></div>
    <br>
    <p>Join this <a href="https://discord.gg/TUrSE6xeDR">Discord Server</a> for more info</p>
</body>
</html>
